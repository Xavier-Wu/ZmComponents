!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ZmaxCompanyComponents",[],t):"object"==typeof exports?exports.ZmaxCompanyComponents=t():e.ZmaxCompanyComponents=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=168)}({0:function(e,t){e.exports=function(e,t,n,a,i,o){var r,s=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(r=e,s=e.default);var c="function"==typeof s?s.options:s;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId=i);var u;if(o?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=u):a&&(u=a),u){var h=c.functional,d=h?c.render:c.beforeCreate;h?(c._injectStyles=u,c.render=function(e,t){return u.call(t),d(e,t)}):c.beforeCreate=d?[].concat(d,u):[u]}return{esModule:r,exports:s,options:c}}},168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(169);a.a.install=function(e){return e.component(a.a.name,a.a)},t.default=a.a},169:function(e,t,n){"use strict";var a=n(34),i=n(170),o=n(0),r=o(a.a,i.a,!1,null,null,null);t.a=r.exports},170:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.options.loading,expression:"options.loading"}],ref:"zmTable",attrs:{data:e.tableParams.data,stripe:e.tableOpt.stripe,border:e.tableOpt.border,"max-height":e.tableOpt.maxHeight,"highlight-current-row":e.tableOpt.highlLightCurrentRow,"show-header":e.tableOpt.showHeader,"default-expand-all":e.tableOpt.defaultExpandAll,"expand-row-keys":e.expandRowKeys,"row-key":e.pk,"header-row-class-name":"table-header-row"},on:{"row-click":e.handleRowClick,select:e.handleSelectionChange,"select-all":e.handleAllSelectionChange,"selection-change":e.selectionChange,"current-change":e.handleCurrentChange,"expand-change":e.expandChange}},"el-table",e.$attr,!1),[e.tableOpt.index?n("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}):e._e(),e._v(" "),e._l(e.columns,function(t,a){return[e.tableOpt.mutilpleSelect&&0===a?n("el-table-column",{key:a+"x",staticStyle:{width:"50px"},attrs:{"reserve-selection":!0,type:"selection",align:e.columns.algin||"center",selectable:t.selectable,"label-class-name":e.tableOpt.hideSelectionHeard?"hide-heard":""}}):e._e(),e._v(" "),t.hide?e._e():n("el-table-column",{key:a,attrs:{"class-name":t.className,prop:t.prop,label:t.label,sortable:t.sortable,"sort-method":t.sortMethod,align:t.align||"center",width:t.width,"min-width":t.minWidth,fixed:t.fixed,type:t.type||"","show-overflow-tooltip":""+t.toolTip=="undefined"?e.tableOpt.toolTip:t.toolTip},scopedSlots:e._u([{key:"header",fn:function(a){return[t.renderHead?[n("RenderHead",{attrs:{"head-index":a.$index,"render-head":t.renderHead,column:t}})]:[[e._v(e._s(t.label))]]]}},{key:"default",fn:function(i){return[t.render?[n("RenderDom",{attrs:{row:i.row,"col-index":a,"row-index":i.$index,render:t.render,column:t}})]:[e._v(e._s(i.row[t.prop]))],e._v(" "),t.button?[e._l(t.group,function(t,a){return["a"===t.tag?n("a",{key:a,class:["text-"+t.type],attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.onClick(i.row,i.$index)}}},[n("i",{staticClass:"vm",class:[""+t.icon]}),e._v(" "),n("span",{staticClass:"vm"},[e._v(e._s(t.name))])]):n("el-button",{key:a,attrs:{type:t.type,size:t.size||"mini",icon:t.icon,disabled:t.disabled,plain:t.plain},on:{click:function(e){return e.stopPropagation(),t.onClick(i.row,i.$index)}}},[e._v("\n"+e._s(t.name)+"\n")])]})]:e._e()]}}],null,!0)})]})],2),e._v(" "),e.tableOpt.showPagination&&e.tableParams.data&&e.tableParams.data.length?n("el-pagination",{staticClass:"mt20 tr",attrs:{total:Number(e.tableParams.count),"current-page":e.currentPage,"page-size":e.tableParams.pageSize,"page-sizes":[5,10,20,30,50],layout:e.tableOpt.layout,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleIndexChange}}):e._e()],1)},i=[],o={render:a,staticRenderFns:i};t.a=o},34:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,o){try{var r=t[i](o),s=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}var o={CHECK_BOX:"checkbox",RADIO:"radio"};t.a={name:"ZmTable",components:{RenderDom:{name:"renderTable",functional:!0,props:{row:Object,colIndex:Number,rowIndex:Number,render:Function,column:{type:Object,default:null}},render:function(e,t){var n=t.props,a=n.row,i=n.colIndex,o=n.rowIndex;return t.props.render(e,a,o,i)}},RenderHead:{name:"renderTableHead",functional:!0,props:{headIndex:Number,renderHead:Function,column:{type:Object,default:null}},render:function(e,t){var n=t.props,a=n.column,i=n.headIndex;return t.props.renderHead(e,a,i)}}},props:{options:{type:Object,default:function(){return{loading:!1,toolTip:!0,isCreateData:!0,isStartPage:!1}}},columns:Array,fetch:Function,expandRowKeys:Array,pk:{type:String,default:"id"},tableParams:{type:[String,Boolean,Object],default:function(){return{data:[],page:1,pageSize:10,total:0,selectList:[]}}},defaultSelections:{type:Array,default:function(){return[]}},selectionModel:{type:[String],default:function(){return o.CHECK_BOX}}},data:function(){return{getRowKeys:function(e){return e.id},tableOpt:{isSetPage:!1,isCreateData:!0,toolTip:!0,stripe:!0,border:!0,initTable:!0,highlLightCurrentRow:!1,showHeader:!0,showPagination:!0,expand:!1,defaultExpandAll:!1,layout:"total, sizes, prev, pager, next, jumper"},selectionsCache:{maps:{},total:0}}},computed:{currentPage:{get:function(){return this.tableParams.page}},hasSelect:function(){return!!this.tableParams.selectList.length},tableSelectLength:function(){return this.tableParams.selectList.length},selectedIds:function(){var e=this;return this.tableParams.selectList.map(function(t){return t[e.pk]})}},watch:{"tableOpt.showPagination":function(e){e||this.tableOpt.isSetPage||(this.tableParams.pageSize=999)},"options.mutilpleSelect":function(e){this.tableOpt.mutilpleSelect=e}},created:function(){this.initDefaultSelections()},mounted:function(){this.tableOpt=Object.assign({},this.tableOpt,this.options),this.fetch&&this.tableOpt.isCreateData&&this.tableOpt.initTable&&this.fetch()},methods:{elToggleRowSelection:function(){var e=this;this.defaultSelections.forEach(function(t){t[e.pk]&&e.$refs.zmTable.toggleRowSelection(t,!0)}),this.initDefaultSelections(),this.$emit("select",this.getSelectionsList(),this.getSelectionsCacheLength())},initDefaultSelections:function(){this.addRows(this.defaultSelections)},getSelectionsCacheItem:function(e){return this.selectionsCache.maps[e]},addSelectionsCache:function(e,t){this.selectionsCache.maps[e]||this.selectionsCache.total++,this.selectionsCache.maps[e]=t},removeSelectionsCacheItem:function(e){this.selectionsCache.maps[e]&&(delete this.selectionsCache.maps[e],this.selectionsCache.total--)},getSelectionsCacheLength:function(){return this.selectionsCache.total||0},getSelectionsList:function(e){var t=[];if(e||this.defaultSelections.length)for(var n in this.selectionsCache.maps)t.push(this.selectionsCache.maps[n]);else t=this.$refs.zmTable.selection.slice(0)||[];return t},clearSelection:function(){this.$refs.zmTable&&this.$refs.zmTable.clearSelection(),this.$set(this.selectionsCache,"maps",{}),this.$set(this.selectionsCache,"total",0)},handleSizeChange:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.tableParams.pageSize=e,n.next=3,t.fetch();case 3:case"end":return n.stop()}},n,t)}))()},handleCurrentChange:function(e){e&&this.tableOpt.highlLightCurrentRow&&(this.selectionsCache.maps=a({},e[this.pk],e),this.selectionsCache.total=1)},expandChange:function(e,t){this.$emit("expand-change",e,t)},handleSelectionChange:function(e,t){var n=this,a=e.filter(function(e){return!!e});a.find(function(e){return e[n.pk]===t[n.pk]})?this.addRows([t]):this.removeRows([t]),this.elSelectionsCache=a,this.$emit("select",this.getSelectionsList(),this.getSelectionsCacheLength())},handleAllSelectionChange:function(e){var t=this.tableParams.data;e.length>1?this.addRows(t):this.removeRows(t),this.elSelectionsCache=e,this.$emit("select-all",this.getSelectionsList(),this.getSelectionsCacheLength())},addRows:function(e){var t=this;e.filter(function(e){return e[t.pk]}).forEach(function(e){var n=e[t.pk];t.getSelectionsCacheItem(n)||t.addSelectionsCache(n,e)})},removeRows:function(e){var t=this;this.getSelectionsCacheLength&&e.forEach(function(e){var n=e[t.pk];t.getSelectionsCacheItem(n)&&t.removeSelectionsCacheItem(n)})},handleIndexChange:function(e){this.tableParams.page=e,this.fetch()},setItemChecked:function(){var e=this;if(this.$refs.zmTable&&this.getSelectionsCacheLength()){this.tableParams.data.some(function(t,n){if(!e.getSelectionsCacheLength())return!0;var a=t[e.pk];e.getSelectionsCacheItem(a)&&e.$nextTick(function(n){e.toggleRowSelection(t)})})}},toggleRowSelection:function(e){this.tableOpt.highlLightCurrentRow?this.$refs.zmTable.setCurrentRow(e):this.$refs.zmTable.toggleRowSelection(e,!0)},handleRowClick:function(e,t,n){this.$emit("row-click",e,t,n)},selectionChange:function(e){this.$emit("selection-change",e)},toggleRowExpansion:function(e,t){this.$refs.zmTable.toggleRowExpansion(e,t)},doLayout:function(){this.$refs.zmTable.doLayout()}}}}})});